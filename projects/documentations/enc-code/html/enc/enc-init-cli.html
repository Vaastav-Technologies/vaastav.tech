<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>init &#8212; enc-code 0.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=c058f7c8" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=7026087e"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="add" href="enc-add-cli.html" />
    <link rel="prev" title="enc-code documentation" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="init">
<h1>init<a class="headerlink" href="#init" title="Link to this heading">¶</a></h1>
<p><p>Initialise a directory as an enc repo’s working tree stage. This directory may already be a git repo or may be
empty (in which case it will be initialised to a git repo and then an enc repo’s working tree stage) Since this
command uses ‘git init …’ under the hood hence all the ‘git init’ options are also valid for this command and can
be provided after all the options for enc-init have been provided as needed. An enc repo has two counterparts as
the:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">)</span> <span class="n">Working</span> <span class="n">tree</span> <span class="n">stage</span><span class="p">:</span> <span class="n">This</span> <span class="n">stage</span> <span class="n">contains</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">their</span> <span class="n">raw</span><span class="o">/</span><span class="n">original</span> <span class="n">form</span> <span class="ow">and</span> <span class="n">has</span> <span class="n">every</span> <span class="n">branch</span> <span class="ow">and</span> <span class="n">commit</span> <span class="ow">in</span>
<span class="n">naked</span> <span class="n">form</span> <span class="k">as</span> <span class="n">well</span><span class="o">.</span>

<span class="mi">2</span><span class="p">)</span> <span class="n">Process</span> <span class="n">stage</span><span class="p">:</span> <span class="n">This</span> <span class="n">stage</span> <span class="n">contains</span> <span class="n">files</span><span class="p">,</span> <span class="n">filenames</span><span class="p">,</span> <span class="n">commit</span><span class="o">-</span><span class="n">messages</span><span class="p">,</span> <span class="n">branch</span><span class="o">-</span><span class="n">names</span><span class="p">,</span> <span class="n">tags</span> <span class="n">etc</span><span class="o">.</span> <span class="ow">in</span> <span class="n">scrambled</span>
<span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">encrypted</span> <span class="n">state</span><span class="o">.</span> <span class="n">Manual</span> <span class="n">changes</span> <span class="n">to</span> <span class="n">this</span> <span class="n">stage</span> <span class="ow">is</span> <span class="n">highly</span> <span class="n">discouraged</span> <span class="k">as</span> <span class="n">it</span> <span class="n">may</span> <span class="n">destroy</span> <span class="n">the</span> <span class="n">sanctity</span> <span class="n">of</span>
<span class="n">underlying</span> <span class="n">git</span> <span class="n">history</span><span class="o">.</span> <span class="n">This</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">stage</span> <span class="n">that</span> <span class="n">eventually</span> <span class="n">gets</span> <span class="n">pushed</span> <span class="n">to</span> <span class="n">a</span> <span class="n">remote</span> <span class="n">encrypted</span> <span class="n">repo</span><span class="o">.</span>
</pre></div>
</div>
</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">enc</span> <span class="n">init</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">v</span> <span class="o">|</span> <span class="o">-</span><span class="n">q</span><span class="p">]</span> <span class="o">-</span><span class="n">s</span> <span class="n">SEED</span> <span class="o">-</span><span class="n">k</span> <span class="n">KEY_FILE</span> <span class="p">[</span><span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="n">version</span> <span class="p">{</span><span class="n">v0</span><span class="p">}]</span> <span class="p">[</span><span class="o">-</span><span class="n">f</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">disable</span><span class="o">-</span><span class="n">cleanup</span><span class="p">]</span> <span class="n">encrypt_directory</span>
</pre></div>
</div>
<section id="enc.init-get_main_command_parser-positional-arguments">
<h2>Positional Arguments<a class="headerlink" href="#enc.init-get_main_command_parser-positional-arguments" title="Link to this heading">¶</a></h2>
<dl class="option-list">
<dt><kbd>encrypt_directory</kbd></dt>
<dd><p>The directory where this enc repo’s process stage will be initialised. This directory will be created and must not exist already.</p>
</dd>
</dl>
</section>
<section id="enc.init-get_main_command_parser-named-arguments">
<h2>Named Arguments<a class="headerlink" href="#enc.init-get_main_command_parser-named-arguments" title="Link to this heading">¶</a></h2>
<dl class="option-list">
<dt><kbd>-v, --verbose</kbd></dt>
<dd><dl class="simple">
<dt>Specify verbosity level as -v, -vv or -vvv.</dt><dd><p>By default the VCS (Git) or OS call command logs are always displayed. For more fine grain tuning on the verbosity
of logs use:
-v to show INFO logs additionally.
-vv to show INFO and DEBUG logs additionally.
-vvv to show INFO, DEBUG and TRACE logs, this level also enables exception tracebacks.</p>
</dd>
</dl>
</dd>
<dt><kbd>-q, --quiet</kbd></dt>
<dd><dl class="simple">
<dt>Quiet logs as -q, -qq or -qqq.</dt><dd><p>By default the VCS (Git) or OS call command logs are always displayed. For more fine grain tuning on quietness of
logs use:
-q to Disable VCS (git) or OS call command logs and WARNINGS; ERROR and FATAL will still show.
-qq to Additionally disable ERRORS; FATAL logs will still show.
-qqq to Disable full logging.</p>
</dd>
</dl>
</dd>
<dt><kbd>-s, --seed</kbd></dt>
<dd><p>seed to be used for encryption.</p>
</dd>
<dt><kbd>-k, --key-file</kbd></dt>
<dd><p>Path to the key file. This file is used as a key/passphrase file to encrypt and decrypt the .enc/.config for further usage. Only readable files will be accepted. Since ‘-’ as a filename opens &lt;stdin&gt; and because we want to store the key-file for later use hence ‘-’ as a filename is not accepted. Likewise, Directories are also not accepted.</p>
</dd>
<dt><kbd>--config-version</kbd></dt>
<dd><p>Possible choices: v0</p>
<p>config version for this enc repo, defaults to ‘v0’ if not provided</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">v0</span></code></p>
</dd>
<dt><kbd>-f, --force</kbd></dt>
<dd><p>force initialise the process stage. This is not the default behavior and providing this flag indicates enc-init to reinitialise the .enc/.config as well as .enc/local.config in this repo’s working tree stage.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt><kbd>--disable-cleanup</kbd></dt>
<dd><dl class="simple">
<dt>Disable cleanup if the command fails. This is not the default behavior.</dt><dd><p>On failure enc-init deletes the created process-stage and cleans up the populated working-tree.
This action will not happen if –disable-cleanup is supplied.</p>
</dd>
</dl>
<p>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
</dl>
</section>
<p><p>Currently only current directory can be initialised</p>
</p>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h2>
<section id="normal-run">
<h3>Normal run<a class="headerlink" href="#normal-run" title="Link to this heading">¶</a></h3>
<p>Always takes current directory as the working tree. This is done so that all the commands (atleast) in <code class="docutils literal notranslate"><span class="pre">v0</span></code> will
always run only on the working-tree root. This is decided to reduce vcs complications at a later stage.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>enc<span class="w"> </span>init<span class="w"> </span><span class="o">{</span>non_existing_process_stage<span class="o">}</span><span class="w"> </span>-k<span class="w"> </span><span class="o">{</span>key_file<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">EncInitCLITest</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="does-not-accept-existing-process-stage-or-encrypt-directory">
<h3>Does not accept existing process stage or encrypt directory<a class="headerlink" href="#does-not-accept-existing-process-stage-or-encrypt-directory" title="Link to this heading">¶</a></h3>
<p>This is done because an existing process-stage may or may-not be empty which can result in potential complications in
directory and vcs management in the future. A path to non-existing process-stage must be provided which will then be
created and initialised.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>enc<span class="w"> </span>init<span class="w"> </span><span class="o">{</span>process_stage<span class="o">}</span><span class="w"> </span>-k<span class="w"> </span><span class="o">{</span>non_existing_key_file<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">EncInitCLITest</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="o">.</span><span class="n">exits_with_err_code</span><span class="p">(</span><span class="n">ENC_ERR_INVALID_USAGE</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="does-not-accept-non-existing-key-files">
<h3>Does not accept non-existing key files<a class="headerlink" href="#does-not-accept-non-existing-key-files" title="Link to this heading">¶</a></h3>
<p>Absent key files obviously do not provide any keys which will disallow encryption/decryption of the vcs tree.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>enc<span class="w"> </span>init<span class="w"> </span><span class="o">{</span>non_existing_process_stage<span class="o">}</span><span class="w"> </span>-k<span class="w"> </span><span class="o">{</span>non_existing_key_file<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">EncInitCLITest</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="o">.</span><span class="n">exits_with_err_code</span><span class="p">(</span><span class="n">ENC_ERR_INVALID_USAGE</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="does-not-accept-key-files-from-stdin">
<h3>Does not accept key files from <code class="docutils literal notranslate"><span class="pre">stdin</span></code><a class="headerlink" href="#does-not-accept-key-files-from-stdin" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">-</span></code> argument to -k/–key-file instructs program to read key-file from <code class="docutils literal notranslate"><span class="pre">stdin</span></code> and since key-file details are
later required for encryption and hence <code class="docutils literal notranslate"><span class="pre">-</span></code> is disallowed as an input value for -k/–key-file.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>enc<span class="w"> </span>init<span class="w"> </span><span class="o">{</span>non_existing_process_stage<span class="o">}</span><span class="w"> </span>-k<span class="w"> </span>-
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">EncInitCLITest</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="o">.</span><span class="n">exits_with_err_code</span><span class="p">(</span><span class="n">ENC_ERR_INVALID_USAGE</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="does-not-accept-unregistered-config-versions">
<h3>Does not accept unregistered config-versions<a class="headerlink" href="#does-not-accept-unregistered-config-versions" title="Link to this heading">¶</a></h3>
<p>Only registered config-version:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">v0</span></code> (default)</p></li>
</ol>
<p>can be supplied.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>enc<span class="w"> </span>init<span class="w"> </span><span class="o">{</span>non_existing_process_stage<span class="o">}</span><span class="w"> </span>--config-version<span class="w"> </span>unregistered<span class="w"> </span>-k<span class="w"> </span><span class="o">{</span>key_file<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">EncInitCLITest</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="o">.</span><span class="n">exits_with_err_code</span><span class="p">(</span><span class="n">ENC_ERR_INVALID_USAGE</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="force-mode-enables-reinitialisation-of-enc-directory">
<h3>Force mode enables reinitialisation of enc directory<a class="headerlink" href="#force-mode-enables-reinitialisation-of-enc-directory" title="Link to this heading">¶</a></h3>
<p>Enable force initialisation of the working tree. If working tree already has a <code class="docutils literal notranslate"><span class="pre">.git</span></code> and <code class="docutils literal notranslate"><span class="pre">.enc</span></code> directory
then that means it was previously enc-initialised and <code class="docutils literal notranslate"><span class="pre">enc-init</span></code> will not reinitialise the enc-repo.
To enable force reinitialisation use the <code class="docutils literal notranslate"><span class="pre">-f</span></code> flag.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>enc<span class="w"> </span>init<span class="w"> </span><span class="o">{</span>gen_non_existing_process_stage<span class="o">}</span><span class="w"> </span>-k<span class="w"> </span><span class="o">{</span>key_file<span class="o">}</span><span class="w"> </span>-f
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">TemporaryDirectory</span><span class="p">()</span> <span class="k">as</span> <span class="n">root_dir</span><span class="p">:</span>
    <span class="n">EncInitCLITest</span><span class="p">(</span><span class="n">command</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;-</span><span class="si">{</span><span class="n">ENC_INIT_FORCE_SHRT_OPT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;--</span><span class="si">{</span><span class="n">ENC_INIT_FORCE_LNG_OPT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">run_with_root</span><span class="p">(</span><span class="n">root_dir</span><span class="p">)</span>   <span class="c1"># remove force and initialise enc repo</span>
    <span class="n">EncInitCLITest</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="o">.</span><span class="n">run_with_root</span><span class="p">(</span><span class="n">root_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># reinitialise with force=True</span>
</pre></div>
</div>
<p>Command text in {} such as {non_existing_process_stage} and {key_file} are test fixtures. Check them out at <a class="reference external" href="../_static/enc-cli-help.md">../_static/enc-cli-help.md</a>.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">enc-code</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Subcommands:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">init</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#enc.init-get_main_command_parser-positional-arguments">Positional Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#enc.init-get_main_command_parser-named-arguments">Named Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enc-add-cli.html">add</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-rm-cli.html">rm</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-status-cli.html">status</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-commit-cli.html">commit</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-log-cli.html">log</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-fetch-cli.html">fetch</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-merge-cli.html">merge</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-pull-cli.html">pull</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-push-cli.html">push</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-manip-cli.html">manip</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plumbing subcommands:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="enc-generate-config-cli.html">generate-config</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-per-commit-cli.html">per-commit</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-refresh-cli.html">refresh</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-process-cli.html">process</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-unprocess-cli.html">unprocess</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-snapshot-cli.html">snapshot</a></li>
<li class="toctree-l1"><a class="reference internal" href="enc-rev-snapshot-cli.html">rev-snapshot</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuration files:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../etc/v0/etc-config.html">V0 style config</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">enc-code documentation</a></li>
      <li>Next: <a href="enc-add-cli.html" title="next chapter">add</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Suhas Krishna Srivastava.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.0.2</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/enc/enc-init-cli.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>